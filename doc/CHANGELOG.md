# Changelog

Все значимые изменения в этом проекте будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).


## [0.4.0] - 2026-01-27

### Добавлено

- **Глобальный полнотекстовый поиск**:
  - Поиск по всему содержимому документации с использованием Apache Lucene
  - Индексация всех HBK файлов для быстрого поиска
  - Современный интерфейс поиска с автодополнением и предварительным просмотром
  - Индикатор статуса индексации с прогрессом
  - API для управления индексацией (`/api/indexing`)
  - API для поиска (`/api/search`) с поддержкой пагинации
  - Подсветка найденных фрагментов в результатах поиска
  - Отдельная страница результатов поиска с детальной информацией

- **Улучшения пользовательского интерфейса**:
  - Новый компонент глобального поиска в заголовке приложения
  - Адаптивный дизайн поиска для мобильных устройств
  - Улучшенная навигация между результатами поиска

### Технические улучшения

- Добавлена зависимость Apache Lucene для полнотекстового поиска
- Реализован `LuceneSearchService` для индексации и поиска
- Новые контроллеры: `SearchController` и `IndexingController`
- Обновлены зависимости Gradle и npm пакетов
- Улучшена архитектура веб-приложения

## [0.3.0] - 2026-01-25

### Добавлено

- **Глобальное оглавление**:
  - Возможность просмотра всех разделов документации в одном окне
  - Переключение между различными HBK файлами без перезапуска приложения
  - Вкладки для быстрого доступа к разным разделам документации

- **Поддержка мобильных устройств**:
  - Адаптивный интерфейс для смартфонов и планшетов
  - Свайп-жесты для открытия/закрытия боковой панели
  - Оптимизированная навигация для сенсорных экранов

- **Улучшенная навигация**:
  - Автоматическое выделение текущей страницы в дереве оглавления
  - Автоматическое раскрытие пути к текущей странице
  - Обновление заголовка браузера с названием страницы для удобной работы с историей
  - Поддержка навигации по внутренним ссылкам v8help://

- **Отображение изображений**:
  - Полная поддержка загрузки и отображения изображений из HBK файлов
  - Автоматическая обработка ссылок на изображения v8help://

- **Новые возможности экспорта**:
  - Команда экспорта всех HBK файлов из каталога платформы
  - Экспорт в формат MkDocs для генерации статических сайтов
  - Гибкие опции экспорта (только страницы, с оглавлением, сохранение структуры)

### Изменено

- **Масштабный рефакторинг frontend**:
  - Переход на Feature-Sliced Design архитектуру
  - Улучшена организация кода: `core/`, `features/`, `shared/`
  - Добавлены unit-тесты с использованием Vitest и MSW
  - Оптимизирована производительность приложения

- **Переработка backend API**:
  - Новая структура REST API для работы с книгами и оглавлением
  - Улучшена обработка ошибок и логирование
  - Оптимизирована работа с HBK файлами

### Документация

- Добавлено описание REST API (`doc/api.md`)
- Детальное описание бинарного формата HBK (`doc/hbk-binary-format.md`)
- Документация по архитектуре frontend (`web/ARCHITECTURE.md`)
- Описание моделей данных (`doc/models.md`)
## [0.2.0] - 2026-01-11

### Добавлено

- **Docker поддержка**:
  - Добавлен `Dockerfile` для сборки Docker образа приложения
  - Добавлен `docker-compose.yml` для удобного запуска с Docker Compose
  - Добавлена документация по запуску в Docker (`doc/docker.md`)
  - Добавлен GitHub Actions workflow для автоматической сборки и публикации Docker образов (`.github/workflows/docker.yml`)
  - Добавлен `.dockerignore` для оптимизации сборки образа

- **Отображение версий**:
  - Добавлен API endpoint `/api/hbk/version` для получения информации о версиях приложения и платформы 1С
  - Реализован `VersionService` для определения версии приложения из git-свойств
  - Реализован `PlatformVersionDetector` для автоматического определения версии платформы 1С из HBK файлов
  - Добавлен `VersionInfo` DTO для передачи информации о версиях
  - Обновлен `AppHeader` для отображения версий приложения, бэкенда и фронтенда

- **Улучшения веб-интерфейса**:
  - Улучшена структура компонентов (рефакторинг организации файлов)
  - Добавлены новые хуки: `usePageTitle`, `useSidebarPages`, `useV8HelpNavigation`
  - Добавлен хук `useDebounce` для оптимизации поиска
  - Улучшена обработка ошибок в `errorUtils.ts`
  - Добавлены утилиты для работы со страницами в `pageUtils.ts`

### Изменено

- Рефакторинг структуры веб-приложения для улучшения организации кода
- Оптимизация работы приложения (улучшена производительность)
- Исправлены ошибки, связанные с рефакторингом

### Технические детали

- Обновлен `HbkRestController` для поддержки нового API версий
- Улучшена работа `HbkFileScannerService`
- Переименован профиль `application-develop.yml` в `application-dev.yml`

## [0.1.0] - 2024-XX-XX

### Добавлено

- Первый релиз проекта
- Базовый функционал чтения HBK файлов
- Веб-интерфейс для просмотра документации
- API для получения структуры оглавления и содержимого страниц
- Поддержка поиска страниц документации

[0.2.0]: https://github.com/alkoleft/hbk-reader/compare/v0.1.0...v0.2.0
[0.1.0]: https://github.com/alkoleft/hbk-reader/releases/tag/v0.1.0
